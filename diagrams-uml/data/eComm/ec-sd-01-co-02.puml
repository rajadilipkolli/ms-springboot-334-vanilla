@startuml
title Kafka Topic Map â€” Browse & Cart
left to right direction
skinparam componentStyle rectangle

package "Product Catalogue" #E1F5FE {
  [Product Catalogue Svc] as CAT #E1F5FE
}
package "Search" #E3F2FD {
  [Search Svc] as SEARCH #E3F2FD
}
package "Cart" #FFFDE7 {
  [Cart Svc] as CART #FFFDE7
}
package "Customer" #E8F5E9 {
  [Customer Svc] as CUST #E8F5E9
}

' Topics (neutral)
component "topic: product.viewed"      as T_PVIEW  <<topic>> #ECEFF1
component "topic: search.performed"    as T_SPERF  <<topic>> #ECEFF1
component "topic: cart.updated"        as T_CUPD   <<topic>> #ECEFF1
component "topic: cart.checked_out"    as T_COUT   <<topic>> #ECEFF1

' Producers
CAT    ..> T_PVIEW  : publish
SEARCH ..> T_SPERF  : publish
CART   ..> T_CUPD   : publish
CART   ..> T_COUT   : publish

' Consumers (illustrative)
CUST   <-- T_PVIEW  : recommend/retarget
SEARCH <-- T_PVIEW  : re-rank signals
CAT    <-- T_SPERF  : trending facets
CUST   <-- T_CUPD   : wishlist/mktg sync
@enduml

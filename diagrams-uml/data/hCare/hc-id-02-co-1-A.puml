@startuml
title Communication â€” Diagnostics to Lab Result (numbered messages)
left to right direction
skinparam componentStyle rectangle

actor Patient as PAT_ACT #F8BBD0
actor Doctor  as DOC_ACT #42A5F5
[Mobile/Web App] as APP
[API Gateway] as G #ECEFF1

[Encounter]   as ENC  #F1F8E9
[PreCheckup]  as PRE  #FFFDE7
[History Svc] as HIST #F3E5F5
[Diagnostic]  as DIAG #EDE7F6
[Prescription] as RX  #FFF3E0
[Lab Svc]     as LAB  #E1F5FE
[Notification] as NOTIF #E8EAF6

' Actors to App
PAT_ACT --> APP : (0) open app
DOC_ACT --> APP : (0.1) review inbox

APP --> G : (1.0) login / check-in
G --> ENC : (1.1) createEncounter
ENC --> PRE : (1.2) collectVitals
PRE --> ENC : (1.3) vitalsReport
ENC --> HIST : (1.4) fetchHistory
HIST --> ENC : (1.5) historySummary
ENC --> DIAG : (1.6) analyze(vitals,history)
DIAG --> RX  : (1.7) createPrescription
RX  --> LAB : (1.8) createLabOrder
LAB --> NOTIF : (1.9) resultReadyEvent
NOTIF --> APP : (1.10) notify Patient/Doctor
@enduml
